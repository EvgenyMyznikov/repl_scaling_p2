### Задание 1

Опишите основные преимущества использования масштабирования методами:

- активный master-сервер и пассивный репликационный slave-сервер; 
- master-сервер и несколько slave-серверов;
- активный сервер со специальным механизмом репликации — distributed replicated block device (DRBD);
- SAN-кластер.

##### Масштабирование баз данных

Горизонтальное масштабирование означает увеличение производительности за счёт разделения данных на множество серверов. Такой способ предполагает увеличение производительности без снижения отказоустойчивости.
Репликация
Этот термин подразумевает копирование данных между серверами. При использовании такого метода выделяют два типа серверов: master и slave. Мастер используется для записи или изменения информации, слейвы — для копирования информации с мастера и её чтения. Чаще всего используется один мастер и несколько слейвов, так как обычно запросов на чтение больше, чем запросов на изменение. Преимущества репликации — большое количество копий данных; если головной сервер выходит из строя, любой другой сможет его заменить и чаще всего репликация используется как средство для обеспечения отказоустойчивости вместе с другими методами масштабирования.
DRBD (Distributed Replicated Block Device — распределённое реплицируемое блочное устройство) представляет собой распределенное, гибкое и универсально реплицируемое решение хранения данных для Linux. Оно отражает содержимое блочных устройств, таких как жесткие диски, разделы, логические тома и т.д. между серверами. Оно создает копии данных на двух устройствах хранения для того, чтобы в случае сбоя одного из них можно было использовать данные на втором. DRBD поддерживает три различных режима репликации:
protocol A: протокол асинхронной репликации; чаще всего используется в сценариях репликации на больших расстояниях.
protocol B: протокол полусинхронной репликации или протокол синхронной памяти.
protocol C: обычно используется для узлов в сетях с небольшими расстояниями; это безусловно, наиболее часто используемый протокол репликации в настройках DRBD. DRBD чрезвычайно гибок и универсален, что делает его решением для репликации хранилища, подходящим для добавления HA-high availability(компьютерных кластерах высокой доступности) практически в любое приложение.
Обычные компьютерные кластерные системы обычно используют какое-то общее хранилище, чтобы данные могли использоваться ресурсами кластера. Этот подход имеет ряд недостатков, которые DRBD может помочь компенсировать:
Общие ресурсы хранения обычно создают отдельную точку отказа в конфигурации кластера - в то время как любой узел в кластере может выйти из строя, не вызывая прерывания обслуживания, отказ хранилища почти неизбежно вызывает простои обслуживания. В DRBD такой проблемы нет, поскольку данные ресурсов кластера реплицируются, а не совместно используются.
Совместно используемые ресурсы хранения особенно чувствительны к ситуациям, когда различные узлы кластера все еще работают, но потеряли все сетевые соединения между собой. В таком сценарии каждый узел в кластере будет считать себя единственным живым узлом в кластере и возьмет на себя управление всеми ресурсами кластера. Это может привести к потенциально катастрофическим результатам, когда разные узлы, например, монтируют и записывают в файловую систему одновременно. Поэтому администраторы кластера должны тщательно реализовывать политики закрытия узлов, чтобы избежать этого. DRBD значительно решает эту проблему, сохраняя два набора реплицированных данных вместо одного общего набора.
SAN (storage area network) это "выделенная сеть" отделенная от традиционных локальных (LAN) и глобальных (WAN) сетей. В общем случае, она предназначена для объединения ресурсов дисковой памяти, подключаемых к одному или нескольким серверам. Как правило, она характеризуется высокой пропускной способностью (Гигабиты/сек) между элементами дисковой системы и отлично масштабируемой архитектурой. SAN очень часто (практически всегда) включает специализированное ПО для управления, мониторинга и конфигурации. Обеспечение увеличения производительности систем хранения данных, их отказоустойчивости и масштабируемости является основным преимуществом SAN. Производительность SAN системы намного выше, чем традиционных систем хранения как за счет высокой скорости передачи данных в используемых интерфейсах, так и за счет гибкости архитектуры SAN (перераспределение нагрузки - "load balancing", несетевое резервирование данных - "LAN-free backup" и др.). Благодаря применению таких технологий, как избыточные пути ввода-вывода "redundant I/O paths", Кластеризация серверов и run-time Репликация данных, значительно увеличивается отказоустойчивость систем хранения данных. Увеличение емкости хранилища данных или добавление в систему новых устройств не требует остановки работы серверов или клиентских подсетей, что так же снижает стоимость эксплуатации, а в некоторых случаях является обязательным требованием.
---

### Задание 2


Разработайте план для выполнения горизонтального и вертикального шаринга базы данных. 

База данных состоит из трёх таблиц: пользователи, книги, магазины. Разделим базу данных на отдельные части: каждую таблицу вынесем на отдельный сервер. Для каждой таблицы будет отдельное соединение. Разнесем таблицу с пользователями на разные сервера: создадим такую же таблицу(только структура, без данных). В приложении выбирается условие, по которому будет определяться нужное соединение (в нашем случае, с 1 по 100 на один
сервер, а со 101 по 200 — на другой). Перед каждым обращением к таблице происходит выбор нужного соединения. 

![repl_scaling_task2](https://github.com/EvgenyMyznikov/repl_scaling_p2/blob/main/img/Task2.drawio.png?raw=true)
